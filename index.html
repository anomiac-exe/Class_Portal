<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Envelope of Appreciation</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        arabic: ['Tajawal', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            500: '#6366f1',
                            600: '#4f46e5',
                            900: '#312e81',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #f8fafc;
            /* Subtle texture */
            background-image: radial-gradient(#e0e7ff 1px, transparent 1px);
            background-size: 24px 24px;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .glass-dark {
            background: rgba(30, 41, 59, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s ease;
        }
        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }

        /* RTL specific adjustments */
        [dir="rtl"] .fa-arrow-right { transform: rotate(180deg); }
    </style>
</head>
<body id="app" class="text-slate-800 min-h-screen flex flex-col transition-all duration-300" :dir="currentLang === 'ar' ? 'rtl' : 'ltr'" :class="currentLang === 'ar' ? 'font-arabic' : 'font-sans'">

    <nav class="w-full fixed top-0 z-50 glass shadow-sm">
        <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2 text-brand-600 font-bold text-lg">
                <i class="fa-solid fa-envelope-open-text"></i>
                <span>{{ t.appName }}</span>
            </div>
            <div class="flex gap-2">
                <button @click="setLang('en')" :class="{'bg-brand-100 text-brand-700': currentLang === 'en'}" class="px-3 py-1 rounded-full text-sm font-medium hover:bg-slate-100 transition">EN</button>
                <button @click="setLang('fr')" :class="{'bg-brand-100 text-brand-700': currentLang === 'fr'}" class="px-3 py-1 rounded-full text-sm font-medium hover:bg-slate-100 transition">FR</button>
                <button @click="setLang('ar')" :class="{'bg-brand-100 text-brand-700': currentLang === 'ar'}" class="px-3 py-1 rounded-full text-sm font-medium hover:bg-slate-100 transition">عربي</button>
            </div>
        </div>
    </nav>

    <main class="flex-grow pt-24 px-4 pb-12 flex flex-col items-center justify-center relative">
        
        <transition name="fade" mode="out-in">
            <div v-if="view === 'story'" key="story" class="max-w-2xl w-full">
                <div class="glass rounded-2xl p-8 shadow-xl border-t-4 border-brand-500">
                    <h1 class="text-3xl font-bold text-slate-900 mb-6 bg-clip-text text-transparent bg-gradient-to-r from-brand-600 to-purple-600">
                        {{ t.storyTitle }}
                    </h1>
                    <div class="prose prose-slate text-slate-600 leading-relaxed space-y-4">
                        <p class="text-lg">{{ t.storyP1 }}</p>
                        <p class="italic border-l-4 border-brand-300 pl-4 py-2 bg-brand-50 rounded-r-lg">
                            "{{ t.storyQuote }}"
                        </p>
                        <p>{{ t.storyP2 }}</p>
                    </div>
                    <div class="mt-8 flex justify-end">
                        <button @click="view = 'login'" class="bg-brand-600 hover:bg-brand-700 text-white px-8 py-3 rounded-xl font-medium shadow-lg hover:shadow-brand-500/30 transition-all flex items-center gap-2 transform hover:-translate-y-1">
                            <span>{{ t.btnEnter }}</span>
                            <i class="fa-solid fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div v-else-if="view === 'login'" key="login" class="max-w-md w-full">
                <div class="glass rounded-2xl p-8 shadow-2xl text-center">
                    <div class="w-16 h-16 bg-brand-100 rounded-full flex items-center justify-center mx-auto mb-6 text-brand-600 text-2xl">
                        <i class="fa-solid fa-user-lock"></i>
                    </div>
                    <h2 class="text-2xl font-bold mb-2">{{ t.loginTitle }}</h2>
                    <p class="text-slate-500 mb-6 text-sm">{{ t.loginSubtitle }}</p>
                    
                    <form @submit.prevent="handleLogin" class="space-y-4">
                        <div class="relative">
                            <input 
                                v-model="loginInput" 
                                type="text" 
                                :placeholder="t.placeholderName" 
                                class="w-full pl-4 pr-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition bg-white/50"
                                required
                            >
                        </div>
                        <p v-if="loginError" class="text-red-500 text-sm animate-pulse">{{ loginError }}</p>
                        <button type="submit" :disabled="loading" class="w-full bg-brand-600 text-white py-3 rounded-lg font-bold hover:bg-brand-700 transition disabled:opacity-50">
                            <span v-if="loading"><i class="fa-solid fa-spinner fa-spin"></i></span>
                            <span v-else>{{ t.btnLogin }}</span>
                        </button>
                    </form>
                </div>
            </div>

            <div v-else-if="view === 'dashboard'" key="dashboard" class="max-w-6xl w-full">
                
                <div class="mb-8 flex flex-col md:flex-row justify-between items-center gap-4">
                    <div>
                        <h2 class="text-2xl font-bold text-slate-800">{{ t.welcome }}, {{ user.Full_name }}</h2>
                        <p class="text-slate-500">{{ t.dashboardSubtitle }}</p>
                    </div>
                    <div class="flex bg-white rounded-lg p-1 shadow-sm border border-slate-200">
                        <button @click="activeTab = 'write'" :class="{'bg-brand-100 text-brand-700 shadow-sm': activeTab === 'write', 'text-slate-500 hover:text-slate-700': activeTab !== 'write'}" class="px-6 py-2 rounded-md font-medium transition flex items-center gap-2">
                            <i class="fa-solid fa-pen-nib"></i> {{ t.tabWrite }}
                        </button>
                        <button @click="activeTab = 'read'" :class="{'bg-brand-100 text-brand-700 shadow-sm': activeTab === 'read', 'text-slate-500 hover:text-slate-700': activeTab !== 'read'}" class="px-6 py-2 rounded-md font-medium transition flex items-center gap-2">
                            <i class="fa-solid fa-heart"></i> {{ t.tabRead }}
                        </button>
                    </div>
                </div>

                <div v-if="activeTab === 'write'" class="space-y-6">
                    <div class="relative max-w-xl mx-auto">
                        <i class="fa-solid fa-search absolute top-1/2 transform -translate-y-1/2 text-slate-400 ltr:left-4 rtl:right-4"></i>
                        <input v-model="searchQuery" type="text" :placeholder="t.searchPlaceholder" class="w-full ltr:pl-10 rtl:pr-10 py-3 rounded-xl border-none shadow-md focus:ring-2 focus:ring-brand-500 outline-none">
                    </div>

                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        <div v-for="student in filteredStudents" :key="student.id" @click="openMessageModal(student)" 
                             class="bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition cursor-pointer border border-slate-100 group hover:border-brand-200">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-brand-100 to-purple-100 text-brand-600 flex items-center justify-center font-bold text-sm">
                                    {{ getInitials(student.Full_name) }}
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="font-medium text-slate-800 truncate group-hover:text-brand-600 transition">{{ student.Full_name }}</p>
                                    <p class="text-xs text-slate-400">{{ t.clickToWrite }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div v-if="activeTab === 'read'" class="space-y-6">
                    <div v-if="myMessages.length === 0" class="text-center py-20 bg-white rounded-2xl shadow-sm">
                        <div class="text-slate-300 text-6xl mb-4"><i class="fa-regular fa-folder-open"></i></div>
                        <h3 class="text-xl font-medium text-slate-600">{{ t.noMessagesYet }}</h3>
                        <p class="text-slate-400 mt-2">{{ t.checkBackLater }}</p>
                    </div>

                    <div v-else class="grid gap-6">
                        <div class="flex justify-end">
                             <button @click="generatePDF" class="bg-slate-800 text-white px-4 py-2 rounded-lg text-sm hover:bg-slate-900 transition flex items-center gap-2">
                                <i class="fa-solid fa-file-export"></i> {{ t.exportPdf }}
                             </button>
                        </div>
                        
                        <div id="messages-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div v-for="msg in myMessages" :key="msg.id" class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 relative overflow-hidden">
                                <div class="absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-brand-100 to-transparent -mr-8 -mt-8 rounded-full opacity-50"></div>
                                <div class="relative z-10">
                                    <i class="fa-solid fa-quote-left text-brand-200 text-2xl mb-2"></i>
                                    <p class="text-slate-700 leading-relaxed font-medium">{{ msg.content }}</p>
                                    <div class="mt-4 pt-2 border-t border-slate-50 text-xs text-slate-300 flex justify-between">
                                        <span>From: Anonymous Classmate</span>
                                        <span>{{ new Date(msg.created_at).toLocaleDateString() }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </transition>

        <div v-if="showModal" class="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm" @click.self="closeModal">
            <div class="bg-white rounded-2xl w-full max-w-lg p-6 shadow-2xl transform transition-all scale-100">
                <h3 class="text-xl font-bold mb-4 text-slate-800">
                    {{ t.writeTo }} <span class="text-brand-600">{{ selectedStudent?.Full_name }}</span>
                </h3>
                <textarea 
                    v-model="messageContent" 
                    rows="4" 
                    :placeholder="t.messagePlaceholder" 
                    class="w-full p-4 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-brand-500 focus:bg-white outline-none transition resize-none mb-4"
                ></textarea>
                <div class="flex justify-end gap-3">
                    <button @click="closeModal" class="px-5 py-2 rounded-lg text-slate-500 hover:bg-slate-100 font-medium transition">{{ t.cancel }}</button>
                    <button @click="sendMessage" :disabled="!messageContent.trim() || sending" class="bg-brand-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-brand-700 shadow-lg shadow-brand-500/30 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2">
                        <span v-if="sending"><i class="fa-solid fa-circle-notch fa-spin"></i></span>
                        <span v-else>{{ t.send }} <i class="fa-solid fa-paper-plane text-xs"></i></span>
                    </button>
                </div>
                <p class="text-xs text-slate-400 mt-4 text-center bg-yellow-50 p-2 rounded text-yellow-700">
                    <i class="fa-solid fa-shield-halved"></i> {{ t.anonymityNote }}
                </p>
            </div>
        </div>

    </main>

    <footer class="w-full bg-white border-t border-slate-200 py-6 mt-auto">
        <div class="max-w-6xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center text-xs text-slate-400 gap-4">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-lock text-brand-500"></i>
                <p>{{ t.privacyText }}</p>
            </div>
            <p>{{ t.rlsText }}</p>
        </div>
    </footer>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;
        const { createClient } = supabase;

        // --- SUPABASE CONFIGURATION ---
        const SUPABASE_URL = 'https://ijgtdeffemmvuezkkfri.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlqZ3RkZWZmZW1tdnVlemtrZnJpIiwicm9sZSI6ImlqZ3RkZWZmZW1tdnVlemtrZnJpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcwMTI5MzEsImV4cCI6MjA4MjU4ODkzMX0.x-nO59Smnq2Sk-Q_rVOM3oPuVmur5nTpgwZntJJEFxY';
        const client = createClient(SUPABASE_URL, SUPABASE_KEY);

        // Translations
        const i18n = {
            en: {
                appName: "The Appreciation Envelope",
                storyTitle: "The John Maxwell Story",
                storyP1: "A teacher once asked her students to write down the nicest thing they could say about every other student in the class. Years later, one of those students died in battle. When they found his body, he had that list in his pocket.",
                storyQuote: "A single word can change a life.",
                storyP2: "Today, we recreate this digital envelope of appreciation. Leave kind words for your classmates. They will see the message, but they won't see who sent it.",
                btnEnter: "Start the Journey",
                loginTitle: "Identify Yourself",
                loginSubtitle: "Enter your full name to access your envelope.",
                placeholderName: "Your Full Name",
                btnLogin: "Open Portal",
                welcome: "Welcome",
                dashboardSubtitle: "Your digital envelope of gratitude.",
                tabWrite: "Write Notes",
                tabRead: "My Envelope",
                searchPlaceholder: "Search for a classmate...",
                clickToWrite: "Tap to write a note",
                noMessagesYet: "Your envelope is empty for now.",
                checkBackLater: "Check back later as others write to you.",
                exportPdf: "Download as PDF",
                writeTo: "Write something nice to",
                messagePlaceholder: "What do you appreciate about them?",
                cancel: "Cancel",
                send: "Send Note",
                anonymityNote: "Your name is saved securely but will NEVER be shown to the recipient.",
                privacyText: "Privacy First: No data is shared outside this class.",
                rlsText: "Secured by Row Level Security (RLS) & Encryption.",
                userNotFound: "User not found. Please check spelling (e.g., ACHOUR YACINE)."
            },
            fr: {
                appName: "L'Enveloppe d'Appréciation",
                storyTitle: "L'Histoire de John Maxwell",
                storyP1: "Un professeur a un jour demandé à ses élèves d'écrire la chose la plus gentille qu'ils pouvaient dire sur chaque autre élève. Des années plus tard, l'un de ces élèves est mort au combat. On a retrouvé cette liste dans sa poche.",
                storyQuote: "Un seul mot peut changer une vie.",
                storyP2: "Aujourd'hui, nous recréons cette enveloppe numérique. Laissez des mots gentils à vos camarades. Ils verront le message, mais pas l'auteur.",
                btnEnter: "Commencer le voyage",
                loginTitle: "Identifiez-vous",
                loginSubtitle: "Entrez votre nom complet pour accéder.",
                placeholderName: "Votre Nom Complet",
                btnLogin: "Ouvrir le portail",
                welcome: "Bienvenue",
                dashboardSubtitle: "Votre enveloppe numérique de gratitude.",
                tabWrite: "Écrire",
                tabRead: "Mon Enveloppe",
                searchPlaceholder: "Chercher un camarade...",
                clickToWrite: "Appuyez pour écrire",
                noMessagesYet: "Votre enveloppe est vide pour l'instant.",
                checkBackLater: "Revenez plus tard.",
                exportPdf: "Télécharger en PDF",
                writeTo: "Écrire un mot gentil à",
                messagePlaceholder: "Qu'appréciez-vous chez cette personne ?",
                cancel: "Annuler",
                send: "Envoyer",
                anonymityNote: "Votre nom est enregistré mais ne sera JAMAIS montré au destinataire.",
                privacyText: "Confidentialité : Aucune donnée n'est partagée.",
                rlsText: "Sécurisé par Row Level Security (RLS).",
                userNotFound: "Utilisateur non trouvé. Vérifiez l'orthographe."
            },
            ar: {
                appName: "مغلف الامتنان",
                storyTitle: "قصة جون ماكسويل",
                storyP1: "طلبت معلمة ذات مرة من طلابها كتابة أجمل شيء يمكنهم قوله عن كل طالب آخر في الفصل. بعد سنوات، توفي أحد هؤلاء الطلاب في معركة، وعندما وجدوا جثمانه، وجدوا تلك القائمة في جيبه.",
                storyQuote: "كلمة واحدة يمكن أن تغير حياة إنسان.",
                storyP2: "اليوم، نعيد إحياء هذا المغلف الرقمي للامتنان. اترك كلمات طيبة لزملائك. سيرون الرسالة، لكنهم لن يعرفوا من أرسلها.",
                btnEnter: "ابدأ برحلة التقدير",
                loginTitle: "سجل دخولك",
                loginSubtitle: "أدخل اسمك الكامل للوصول إلى مغلفك.",
                placeholderName: "اسمك الكامل",
                btnLogin: "فتح البوابة",
                welcome: "أهلاً بك",
                dashboardSubtitle: "مغلفك الرقمي المليء بالامتنان.",
                tabWrite: "أرسل كلمة طيبة",
                tabRead: "مغلفات الامتنان",
                searchPlaceholder: "ابحث عن زميل...",
                clickToWrite: "اضغط لكتابة رسالة",
                noMessagesYet: "مغلفك فارغ حتى الآن.",
                checkBackLater: "تحقق لاحقاً بينما يكتب لك الآخرون.",
                exportPdf: "تحميل كملف PDF",
                writeTo: "اكتب شيئاً جميلاً لـ",
                messagePlaceholder: "ما الذي تقدره في هذا الشخص؟",
                cancel: "إلغاء",
                send: "إرسال الرسالة",
                anonymityNote: "اسمك محفوظ بأمان ولكن لن يظهر أبداً للمستلم.",
                privacyText: "الخصوصية أولاً: لا تتم مشاركة البيانات خارج هذا الفصل.",
                rlsText: "مؤمن بواسطة بروتوكولات الأمان (RLS).",
                userNotFound: "المستخدم غير موجود. تأكد من الاسم (مثلاً: ACHOUR YACINE)."
            }
        };

        createApp({
            setup() {
                const view = ref('story'); // story, login, dashboard
                const currentLang = ref('en');
                const t = computed(() => i18n[currentLang.value]);
                
                const loginInput = ref('');
                const loginError = ref('');
                const loading = ref(false);
                const sending = ref(false);
                
                const user = ref(null);
                const students = ref([]);
                const myMessages = ref([]);
                
                const activeTab = ref('write');
                const searchQuery = ref('');
                
                const showModal = ref(false);
                const selectedStudent = ref(null);
                const messageContent = ref('');

                // Language Management
                const setLang = (lang) => {
                    currentLang.value = lang;
                };

                // Helper: Get Initials
                const getInitials = (name) => {
                    if (!name) return '';
                    const parts = name.split(' ');
                    if (parts.length >= 2) return (parts[0][0] + parts[1][0]).toUpperCase();
                    return name.substring(0, 2).toUpperCase();
                };

                // Login Logic (Using Students table)
                const handleLogin = async () => {
                    if (!loginInput.value) return;
                    loading.value = true;
                    loginError.value = '';

                    const formattedName = loginInput.value.trim().toUpperCase();

                    try {
                        // NOTE: Using 'Students' (Capital S) as requested
                        const { data, error } = await client
                            .from('Students')
                            .select('*')
                            .ilike('Full_name', formattedName)
                            .maybeSingle(); 

                        if (error) throw error;
                        
                        if (!data) {
                            loginError.value = t.value.userNotFound;
                        } else {
                            user.value = data;
                            await loadDashboardData();
                            view.value = 'dashboard';
                        }
                    } catch (err) {
                        console.error("Login Error:", err);
                        loginError.value = "Connection error. Please try again.";
                    } finally {
                        loading.value = false;
                    }
                };

                // Dashboard Data Loading
                const loadDashboardData = async () => {
                    // 1. Fetch Classmates (exclude self)
                    // Using 'Students' table
                    const { data: classmates } = await client
                        .from('Students')
                        .select('*')
                        .neq('id', user.value.id)
                        .order('Full_name');
                    
                    if (classmates) students.value = classmates;

                    // 2. Fetch My Messages
                    // NOTE: Using 'messages' (lowercase m) and 'recipient_name' (string)
                    const { data: msgs } = await client
                        .from('messages')
                        .select('*')
                        .eq('recipient_name', user.value.Full_name) 
                        .order('created_at', { ascending: false });
                    
                    if (msgs) myMessages.value = msgs;
                };

                const filteredStudents = computed(() => {
                    if (!searchQuery.value) return students.value;
                    const q = searchQuery.value.toUpperCase();
                    return students.value.filter(s => s.Full_name.toUpperCase().includes(q));
                });

                // Modal Logic
                const openMessageModal = (student) => {
                    selectedStudent.value = student;
                    messageContent.value = '';
                    showModal.value = true;
                };

                const closeModal = () => {
                    showModal.value = false;
                    selectedStudent.value = null;
                };

                // Sending Logic
                const sendMessage = async () => {
                    if (!messageContent.value.trim()) return;
                    sending.value = true;

                    try {
                        // NOTE: Inserting into 'messages' using 'recipient_name' (string) and 'sender_name'
                        const { error } = await client
                            .from('messages')
                            .insert({
                                recipient_name: selectedStudent.value.Full_name, // Linking by Name string
                                sender_name: user.value.Full_name, // Saved for safety
                                content: messageContent.value
                            });

                        if (error) throw error;

                        alert(currentLang.value === 'ar' ? 'تم الإرسال بنجاح!' : 'Message sent successfully!');
                        closeModal();
                    } catch (err) {
                        console.error("Send Error:", err);
                        alert("Error sending message. Please try again.");
                    } finally {
                        sending.value = false;
                    }
                };

                // PDF Export Logic
                const generatePDF = () => {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    
                    doc.setFont("helvetica", "bold");
                    doc.setFontSize(20);
                    doc.text(`Envelopes of Gratitude`, 20, 20);
                    
                    doc.setFont("helvetica", "normal");
                    doc.setFontSize(12);
                    doc.text(`For: ${user.value.Full_name}`, 20, 30);
                    
                    let y = 50;
                    
                    myMessages.value.forEach((msg, index) => {
                        if (y > 270) { doc.addPage(); y = 20; }
                        
                        doc.setFontSize(10);
                        doc.setTextColor(100);
                        doc.text(`Message ${index + 1} - ${new Date(msg.created_at).toLocaleDateString()}`, 20, y);
                        
                        y += 7;
                        doc.setFontSize(12);
                        doc.setTextColor(0);
                        
                        // Handle text wrapping
                        const splitText = doc.splitTextToSize(msg.content, 170);
                        doc.text(splitText, 20, y);
                        
                        y += (splitText.length * 7) + 10;
                    });
                    
                    doc.save("My_Appreciation_Envelope.pdf");
                };

                return {
                    view, t, currentLang, setLang,
                    loginInput, loginError, handleLogin, loading,
                    user, activeTab, filteredStudents, searchQuery,
                    openMessageModal, showModal, closeModal, selectedStudent,
                    messageContent, sendMessage, sending,
                    myMessages, generatePDF, getInitials
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
